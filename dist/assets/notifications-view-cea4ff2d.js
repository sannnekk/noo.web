import{d as S,C as b,c as E,a as p,b as N,a2 as O,r as v,w as g,a1 as w,q as D,j as f,g as a,k as d,s as F,f as y,e as h,y as C,v as j,P as q,O as G,al as L,am as P,E as T,p as z,l as A,_ as H,G as J}from"./index-f5d4a483.js";import{S as K}from"./settings-section-e4a83fe8.js";const Q=S({__name:"course-select",props:{label:{},modelValue:{}},emits:["update:modelValue"],setup(n,{emit:_}){const i=n,o=_,e=b.Services.Course,u=b.Services.UI;async function c(r){try{return e.getCourses(r)}catch(s){u.openErrorModal("Произошла ошибка при загрузке курсов",s.message)}}const m=E({get:()=>i.modelValue?[i.modelValue]:[],set:r=>{r.length===0&&o("update:modelValue",null),o("update:modelValue",r[0])}});return(r,s)=>{const t=O;return p(),N(t,{label:r.label,"fetch-function":c,"label-keys":["name"],"max-count":1,modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=V=>m.value=V)},null,8,["label","modelValue"])}}}),R=S({__name:"user-role-select",props:{label:{},modelValue:{}},emits:["update:modelValue"],setup(n,{emit:_}){const i=n,o=_,e=v(i.modelValue.value);g(()=>e.value,()=>o("update:modelValue",u.find(c=>c.value===e.value)));const u=[{label:"Администратор",value:"admin"},{label:"Преподаватель",value:"teacher"},{label:"Куратор",value:"mentor"},{label:"Ученик",value:"student"}];return(c,m)=>{const r=w;return p(),N(r,{label:c.label,options:u,modelValue:e.value,"onUpdate:modelValue":m[0]||(m[0]=s=>e.value=s)},null,8,["label","modelValue"])}}}),W=n=>(z("data-v-5135a158"),n=n(),A(),n),X={class:"create-notification-form"},Y={class:"row"},Z={class:"col-lg-6"},ee={class:"form-group"},oe={class:"col-lg-6"},te={class:"row"},le={class:"col-lg-6"},ae={class:"form-group"},se={class:"col-lg-6"},ne={class:"form-group"},ue=W(()=>a("h4",null,"Кому отправить",-1)),ie={class:"row"},ce={class:"col-lg-6"},re={class:"form-group"},de={class:"col-lg-6"},_e={key:0,class:"form-group"},me={key:1,class:"form-group"},pe={class:"form-actions"},ve=S({__name:"create-notification-form",emits:["create"],setup(n,{emit:_}){const i=_,o=v({title:"",message:"",type:"other",link:""}),e=v({selector:"all",value:null}),u=v(null);g(u,()=>{var s;return e.value.value=((s=u.value)==null?void 0:s.value)||null});const c=v(null);g(c,()=>{var s;return e.value.value=((s=c.value)==null?void 0:s.id)||null}),g(()=>e.value.selector,()=>e.value.value=null);function m(){i("create",o.value,e.value)}const r=[{value:"all",label:"Всем"},{value:"role",label:"По роли"},{value:"course",label:"По курсу"}];return(s,t)=>{const V=G,k=L,x=P,U=w,M=R,I=Q,$=T,B=D("auto-animate");return p(),f(q,null,[a("div",X,[a("div",Y,[a("div",Z,[a("div",ee,[d(V,{type:"text",modelValue:o.value.title,"onUpdate:modelValue":t[0]||(t[0]=l=>o.value.title=l),label:"Заголовок",validators:[l=>!!l||"Заголовок обязателен"]},null,8,["modelValue","validators"])])]),a("div",oe,[d(k,{label:"Тип",modelValue:o.value.type,"onUpdate:modelValue":t[1]||(t[1]=l=>o.value.type=l)},null,8,["modelValue"])])]),a("div",te,[a("div",le,[a("div",ae,[d(x,{modelValue:o.value.message,"onUpdate:modelValue":t[2]||(t[2]=l=>o.value.message=l),label:"Сообщение (необязательно)"},null,8,["modelValue"])])]),a("div",se,[a("div",ne,[d(V,{label:"Ссылка (необязательно)",type:"url",modelValue:o.value.link,"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.link=l)},null,8,["modelValue"])])])]),ue,a("div",ie,[a("div",ce,[a("div",re,[d(U,{label:"Селектор",modelValue:e.value.selector,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.selector=l),options:r},null,8,["modelValue"])])]),F((p(),f("div",de,[e.value.selector==="role"?(p(),f("div",_e,[d(M,{label:"Выберите роль",modelValue:u.value,"onUpdate:modelValue":t[5]||(t[5]=l=>u.value=l)},null,8,["modelValue"])])):y("",!0),e.value.selector==="course"?(p(),f("div",me,[d(I,{label:"Выберите курс",modelValue:c.value,"onUpdate:modelValue":t[6]||(t[6]=l=>c.value=l),expectId:""},null,8,["modelValue"])])):y("",!0)])),[[B]])]),a("div",pe,[d($,{alignment:"right",onClick:t[7]||(t[7]=l=>m())},{default:h(()=>[C(" Создать и отправить ")]),_:1})])]),a("pre",null,"		"+j(e.value)+`
	`,1)],64)}}});const fe=H(ve,[["__scopeId","data-v-5135a158"]]),Ve=J("settings-module:notifications",()=>{const n=b.Services.Notification,_=b.Services.UI;async function i(o,e){try{await n.createNotification(o,e,{showLoader:!0})}catch(u){_.openErrorModal("Не удалось создать уведомление",u.message)}}return{createNotification:i}}),ge={class:"notifications-view"},he=S({__name:"notifications-view",setup(n){const _=Ve();function i(o,e){_.createNotification(o,e)}return(o,e)=>(p(),f("div",ge,[d(K,null,{title:h(()=>[C("Отправить уведомление")]),content:h(()=>[d(fe,{onCreate:i})]),_:1})]))}});export{he as default};
