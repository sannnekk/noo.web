import{d as b,C as g,c as C,a as v,b as k,a2 as O,a1 as x,r as V,w as S,q as D,j as f,g as a,k as r,s as F,f as w,e as h,y as U,O as T,al as j,E as q,p as G,l as L,_ as z,G as A}from"./index-b08261d5.js";import{S as H}from"./settings-section-116f6a02.js";const J=b({__name:"course-select",props:{label:{},modelValue:{}},emits:["update:modelValue"],setup(s,{emit:d}){const n=s,e=d,o=g.Services.Course,u=g.Services.UI;async function i(c){try{return o.getCourses(c)}catch(_){u.openErrorModal("Произошла ошибка при загрузке курсов",_.message)}}const p=C({get:()=>n.modelValue?[n.modelValue]:[],set:c=>{c.length===0&&e("update:modelValue",null),e("update:modelValue",c[0])}});return(c,_)=>{const m=O;return v(),k(m,{label:c.label,"fetch-function":i,"label-keys":["name"],"max-count":1,modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=t=>p.value=t)},null,8,["label","modelValue"])}}}),K=b({__name:"user-role-select",props:{label:{},modelValue:{}},emits:["update:modelValue"],setup(s,{emit:d}){const n=s,e=d,o=C({get:()=>n.modelValue,set:i=>e("update:modelValue",i)}),u=[{label:"Администратор",value:"admin"},{label:"Преподаватель",value:"teacher"},{label:"Куратор",value:"mentor"},{label:"Ученик",value:"student"}];return(i,p)=>{const c=x;return v(),k(c,{label:i.label,options:u,modelValue:o.value,"onUpdate:modelValue":p[0]||(p[0]=_=>o.value=_)},null,8,["label","modelValue"])}}}),P=s=>(G("data-v-6f78b6cd"),s=s(),L(),s),Q={class:"create-notification-form"},R={class:"row"},W={class:"col-lg-6"},X={class:"form-group"},Y={class:"col-lg-6"},Z={class:"row"},ee={class:"col-lg-6"},oe={class:"form-group"},te={class:"col-lg-6"},le={class:"form-group"},ae=P(()=>a("h4",null,"Кому отправить",-1)),se={class:"row"},ne={class:"col-lg-6"},ue={class:"form-group"},ie={class:"col-lg-6"},ce={key:0,class:"form-group"},re={key:1,class:"form-group"},de={class:"form-actions"},_e=b({__name:"create-notification-form",emits:["create"],setup(s,{emit:d}){const n=d,e=V({title:"",message:"",type:"other",link:""}),o=V({selector:"all",value:null}),u=V(null);S(u,()=>{var m;return o.value.value=((m=u.value)==null?void 0:m.value)||null});const i=V(null);S(i,()=>{var m;return o.value.value=((m=i.value)==null?void 0:m.id)||null}),S(()=>o.value.selector,()=>o.value.value=null);function p(){n("create",e.value,o.value)}const c=[{value:"other",label:"Другое"},{value:"announcement",label:"Объявление"},{value:"maintenance",label:"Технические работы"},{value:"new-feature",label:"Новая функция"}],_=[{value:"all",label:"Всем"},{value:"role",label:"По роли"},{value:"course",label:"По курсу"}];return(m,t)=>{const y=T,N=x,M=j,I=K,$=J,B=q,E=D("auto-animate");return v(),f("div",Q,[a("div",R,[a("div",W,[a("div",X,[r(y,{type:"text",modelValue:e.value.title,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value.title=l),label:"Заголовок",validators:[l=>!!l||"Заголовок обязателен"]},null,8,["modelValue","validators"])])]),a("div",Y,[r(N,{label:"Тип",modelValue:e.value.type,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.type=l),options:c},null,8,["modelValue"])])]),a("div",Z,[a("div",ee,[a("div",oe,[r(M,{modelValue:e.value.message,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.message=l),label:"Сообщение (необязательно)"},null,8,["modelValue"])])]),a("div",te,[a("div",le,[r(y,{label:"Ссылка (необязательно)",type:"url",modelValue:e.value.link,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.link=l)},null,8,["modelValue"])])])]),ae,a("div",se,[a("div",ne,[a("div",ue,[r(N,{label:"Селектор",modelValue:o.value.selector,"onUpdate:modelValue":t[4]||(t[4]=l=>o.value.selector=l),options:_},null,8,["modelValue"])])]),F((v(),f("div",ie,[o.value.selector==="role"?(v(),f("div",ce,[r(I,{label:"Выберите роль",modelValue:u.value,"onUpdate:modelValue":t[5]||(t[5]=l=>u.value=l)},null,8,["modelValue"])])):w("",!0),o.value.selector==="course"?(v(),f("div",re,[r($,{label:"Выберите курс",modelValue:i.value,"onUpdate:modelValue":t[6]||(t[6]=l=>i.value=l),expectId:""},null,8,["modelValue"])])):w("",!0)])),[[E]])]),a("div",de,[r(B,{alignment:"right",onClick:t[7]||(t[7]=l=>p())},{default:h(()=>[U(" Создать и отправить ")]),_:1})])])}}});const me=z(_e,[["__scopeId","data-v-6f78b6cd"]]),pe=A("settings-module:notifications",()=>{const s=g.Services.Notification,d=g.Services.UI;async function n(e,o){try{await s.createNotification(e,o,{showLoader:!0})}catch(u){d.openErrorModal("Не удалось создать уведомление",u.message)}}return{createNotification:n}}),ve={class:"notifications-view"},ge=b({__name:"notifications-view",setup(s){const d=pe();function n(e,o){d.createNotification(e,o)}return(e,o)=>(v(),f("div",ve,[r(H,null,{title:h(()=>[U("Отправить уведомление")]),content:h(()=>[r(me,{onCreate:n})]),_:1})]))}});export{ge as default};
