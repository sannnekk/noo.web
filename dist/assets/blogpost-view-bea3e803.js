import{d as f,C as l,O as g,r as v,a as h,y as b,g as t,o as d,b as w,e,f as p,w as y,s as u,t as r,h as S,v as x,x as B,M as R,m as k}from"./index-d17ade26.js";import{u as C,b as P}from"./blog-e8104212.js";import{u as V}from"./useDate-126c6fe0.js";const N=f("blog-module:post",()=>{const n=l.Services.UI,o=l.Services.Blog,i=g(),s=v();async function c(){const _=i.params.id;n.setLoading(!0);try{const a=await o.getPost(_);if(!a.data)throw new Error("Пост не найден");s.value=a.data}catch(a){n.openErrorModal("Ошибка при загрузке поста",a.message)}finally{n.setLoading(!1)}}return{post:s,fetchPost:c}}),E={key:0,class:"blogpost-view"},L={class:"blogpost-view__back"},T={class:"blogpost-view__header"},D={class:"blogpost-view__header__info"},I={class:"blogpost-view__header__info__date"},M={class:"blogpost-view__header__info__author"},A={class:"blogpost-view__reactions"},O={class:"blogpost-view__body"},U=h({__name:"blogpost-view",setup(n){g();const o=N(),i=C();return o.fetchPost().then(()=>{var s;return b(((s=o.post)==null?void 0:s.title)||"Пост не найден")}),(s,c)=>{const _=B,a=R;return t(o).post?(d(),w("div",E,[e("div",L,[p(_,{to:"/blog",design:"inline"},{default:y(()=>[u(" Назад к ленте ")]),_:1})]),e("div",T,[e("h1",null,r(t(o).post.title),1),e("div",D,[e("span",I,r(t(V)(t(o).post.createdAt,{precision:"day"}).toBeautiful()),1),u(" | "),e("span",M,r(t(o).post.author.name),1)])]),e("div",A,[p(P,{reactions:t(o).post.reactionCounts,myReaction:t(o).post.myReaction,loading:t(i).isReactionLoading,onReact:c[0]||(c[0]=m=>t(i).reactToPost(t(o).post,m))},null,8,["reactions","myReaction","loading"])]),e("div",O,[(d(),S(a,{content:t(o).post.content,key:t(o).post.id},null,8,["content"]))])])):x("",!0)}}});const z=k(U,[["__scopeId","data-v-d5f3d6aa"]]);export{z as default};
